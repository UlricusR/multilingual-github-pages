<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    Part III - Multilingual - 
    Multi-lingual GitHub Page
  </title><!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Part III - Multilingual" />
<meta property="og:locale" content="en" />
<meta name="description" content="{“en”=&gt;”A sample multi-lingual GitHub Page built with a Jekyll plugin not supported by GitHub Pages.”, “de”=&gt;”Eine mehrsprachige Demoseite erstellt mit einem von GitHub Pages nicht unterstützten Jekyll-Plugin”}" />
<meta property="og:description" content="{“en”=&gt;”A sample multi-lingual GitHub Page built with a Jekyll plugin not supported by GitHub Pages.”, “de”=&gt;”Eine mehrsprachige Demoseite erstellt mit einem von GitHub Pages nicht unterstützten Jekyll-Plugin”}" />
<link rel="canonical" href="https://ulricusr.github.io/multilingual-github-pages/part3-multilingual/" />
<meta property="og:url" content="https://ulricusr.github.io/multilingual-github-pages/part3-multilingual/" />
<meta property="og:site_name" content="{“en”=&gt;”Multi-lingual GitHub Page”, “de”=&gt;”Mehrsprachige GitHub-Seite”}" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Part III - Multilingual" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"{“en”=&gt;”A sample multi-lingual GitHub Page built with a Jekyll plugin not supported by GitHub Pages.”, “de”=&gt;”Eine mehrsprachige Demoseite erstellt mit einem von GitHub Pages nicht unterstützten Jekyll-Plugin”}","headline":"Part III - Multilingual","url":"https://ulricusr.github.io/multilingual-github-pages/part3-multilingual/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/multilingual-github-pages/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://ulricusr.github.io/multilingual-github-pages/feed.xml" title="{&quot;en&quot;=&gt;&quot;Multi-lingual GitHub Page&quot;, &quot;de&quot;=&gt;&quot;Mehrsprachige GitHub-Seite&quot;}" /><!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9E8TF530YL"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9E8TF530YL');
</script>

</head>
<body>
<header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/multilingual-github-pages/">Multi-lingual GitHub Page</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/multilingual-github-pages/about/">About</a><a class="page-link" href="/multilingual-github-pages/prerequisites/">Pre-requisites</a><a class="page-link" href="/multilingual-github-pages/part1-setup/">Part I - Setup</a><a class="page-link" href="/multilingual-github-pages/part2-maintain/">Part II - Maintain</a><a class="page-link" href="/multilingual-github-pages/part3-multilingual/">Part III - Multilingual</a></div>
      </nav></div>
  <div class="wrapper">
    
    <!-- jekyll-polyglot will process ferh= into href= through the static_href liquid block tag without relativizing the url; useful for making language navigation switchers  -->
    
      
      <a style="font-weight: bold;" href="/multilingual-github-pages/part3-multilingual/" >en</a>
      
    
      |
      <a  href="/multilingual-github-pages/de/part3-multilingual/" >de</a>
      
    
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Part III - Multilingual</h1>
  </header>

  <div class="post-content">
    <h2 id="part-iii-building-the-multi-lingual-site">Part III: Building the multi-lingual site</h2>

<p>Let’s now build our multilingual site using the <a href="https://github.com/untra/polyglot">Polyglot plugin</a>. The site is based on Jekyll’s <code class="language-plaintext highlighter-rouge">minima</code> theme, so if you use another theme, the steps might look different in detail, but should be rather similar.</p>

<h3 id="step-1-install-the-plugin">Step 1: Install the plugin</h3>

<p>Navigate to your publishing source directory <code class="language-plaintext highlighter-rouge">/docs</code> and add the following to your <code class="language-plaintext highlighter-rouge">Gemfile</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>group :jekyll_plugins do
   gem "jekyll-polyglot"
end
</code></pre></div></div>

<p>Alternatively, install the gem locally following the description in the Polyglot README.</p>

<p>Then specify the plugin in your <code class="language-plaintext highlighter-rouge">_config.yml</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>plugins:
  - jekyll-polyglot
</code></pre></div></div>

<p>Run <code class="language-plaintext highlighter-rouge">bundle install</code> to finalize the installation.</p>

<h3 id="step-2-configure-the-plugin">Step 2: Configure the plugin</h3>

<p>Please refer to the Polyglot README for details on the configuration. For my purposes (English as default language, German as second language), the following configuration in <code class="language-plaintext highlighter-rouge">_config.yml</code> was sufficient:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Polyglot language plugin settings
languages: ["en", "de"]
default_lang: "en"
exclude_from_localization: ["assets", "javascript", "images", "css", "public"]
parallel_localization: true
</code></pre></div></div>

<h3 id="step-3-localize-your-metadata">Step 3: Localize your metadata</h3>

<p>The site will use some metadata like the title or the description, which are stored in the <code class="language-plaintext highlighter-rouge">_config.yml</code> file. You need to add a language specific title and description:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>title:
  en: Multi-lingual GitHub Page
  de: Mehrsprachige GitHub-Seite
description:
  en: A sample multi-lingual GitHub Page built with a Jekyll plugin not supported by GitHub Pages.
  de: Eine mehrsprachige Demoseite erstellt mit einem von GitHub Pages nicht unterstützten Jekyll-Plugin
</code></pre></div></div>

<p>The title is used in the <code class="language-plaintext highlighter-rouge">header.html</code> file of the <code class="language-plaintext highlighter-rouge">minima</code> theme. Therefore we need to override the remote <code class="language-plaintext highlighter-rouge">header.html</code> file by creating a <code class="language-plaintext highlighter-rouge">_includes</code> folder in the top level publishing folder (here: <code class="language-plaintext highlighter-rouge">docs</code>) and save a copy there. Next, we need to let Jekyll know which language we’re in by adding the following line as first line in <code class="language-plaintext highlighter-rouge">header.html</code>, which creates the variable <code class="language-plaintext highlighter-rouge">lang</code> and assigns the current language:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{% assign lang = site.active_lang %}
&lt;header class="site-header"&gt;
	...
</code></pre></div></div>

<p>Finally, we need to modify the line containing <code class="language-plaintext highlighter-rouge">{{ site.title | escape }}</code> with <code class="language-plaintext highlighter-rouge">{{ site.title[lang] | escape }}</code>.</p>

<p>The description is used in the <code class="language-plaintext highlighter-rouge">footer.html</code> file, so simply repeat the steps above, but replace <code class="language-plaintext highlighter-rouge">{{ site.description | escape }}</code> with <code class="language-plaintext highlighter-rouge">{{ site.description[lang] | escape }}</code>.</p>

<h3 id="step-4-localize-your-title-tag">Step 4: Localize your title tag</h3>

<p>As next step, we have to take care of the <code class="language-plaintext highlighter-rouge">&lt;title&gt;</code> tag in Jekyll’s built-in SEO section, because the site description is also used there. The title tag is used by search engines, but also by most browsers to name the browser tab. As we cannot pass a custom title to Jekyll’s SEO section, we need to disable the display of the title there and create our own <code class="language-plaintext highlighter-rouge">&lt;title&gt;</code> tag instead.</p>

<p>To do so, we need to override Minima’s <code class="language-plaintext highlighter-rouge">head.html</code> (and along with it the <code class="language-plaintext highlighter-rouge">custom-head.html</code>, otherwise we’d run into an error when building the site). So copy those two files from Minima’s <code class="language-plaintext highlighter-rouge">_includes</code> folder to your <code class="language-plaintext highlighter-rouge">_includes</code> folder and open <code class="language-plaintext highlighter-rouge">head.html</code> for editing (you can leave <code class="language-plaintext highlighter-rouge">custom-head.html</code> untouched, but may also use for further customizations like adding a favicon).</p>

<p>Modify the line <code class="language-plaintext highlighter-rouge">{%- seo -%}</code> to <code class="language-plaintext highlighter-rouge">{%- seo title=false -%}</code>.</p>

<blockquote>
  <p>For some reason, which I didn’t dig in deeper, overriding <code class="language-plaintext highlighter-rouge">head.html</code> lead to my site no longer finding the right stylesheet. I had to change the line <code class="language-plaintext highlighter-rouge">&lt;link rel="stylesheet" href="/multilingual-github-pages/assets/css/style.css"&gt;</code> to <code class="language-plaintext highlighter-rouge">&lt;link rel="stylesheet" href="/multilingual-github-pages/assets/main.css"&gt;</code> to fix it.</p>
</blockquote>

<p>Finally, we’ll have to add our own custom title in <code class="language-plaintext highlighter-rouge">head.html</code>. As very first line of the file, set the language by adding <code class="language-plaintext highlighter-rouge">{% assign lang = site.active_lang %}</code>.</p>

<p>Then add the following code before the modified <code class="language-plaintext highlighter-rouge">{%- seo title=false -%}</code> line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;title&gt;
  {% if page.title %}{{ page.title }} - {% endif %}
  {% if site.title[lang] %}{{ site.title[lang] }}{% endif %}
&lt;/title&gt;
</code></pre></div></div>

<p>It will add the page title, if set in the frontmatter of the file, and then append the localized site title, separated by a slash.</p>

<h3 id="step-5-localize-your-main-menu">Step 5: Localize your main menu</h3>

<p>Minima allows you to define the order of the top menu items by adding those to <code class="language-plaintext highlighter-rouge">_config.yml</code>. We need to do this for all languages:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Top menu order
header_pages:
  en:
    - about-en.md
    - prerequisites-en.md
    - part1-setup-en.md
    - part2-maintain-en.md
    - part3-multilingual-en.md
  de:
    - about-de.md
    - prerequisites-de.md
    - part1-setup-de.md
    - part2-maintain-de.md
    - part3-multilingual-de.md
</code></pre></div></div>

<p>Next, in <code class="language-plaintext highlighter-rouge">header.html</code> change <code class="language-plaintext highlighter-rouge">{%- assign page_paths = site.header_pages | default: default_paths -%}</code> to <code class="language-plaintext highlighter-rouge">{%- assign page_paths = site.header_pages[lang] | default: default_paths -%}</code>.</p>

<h3 id="step-6-localize-your-pages">Step 6: Localize your pages</h3>

<p>Pages are localized by adding one file per language and using the language code to extend the filename. With <code class="language-plaintext highlighter-rouge">en</code> being the default language and <code class="language-plaintext highlighter-rouge">de</code> the additional language for this example, we will need to have a <code class="language-plaintext highlighter-rouge">...-en.md</code> and a <code class="language-plaintext highlighter-rouge">...-de.md</code> version for each file we want to localize (also works with <code class="language-plaintext highlighter-rouge">html</code> files).</p>

<p>In addition, we need to add the identical <code class="language-plaintext highlighter-rouge">permalink</code> and a <code class="language-plaintext highlighter-rouge">lang</code> tag to the frontmatter of each file.</p>

<p>So, rename your <code class="language-plaintext highlighter-rouge">index.md</code> to <code class="language-plaintext highlighter-rouge">index-en.md</code> and add the following lines to the frontmatter:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: home
permalink: /
lang: en
---
</code></pre></div></div>

<p>Duplicate the file and save it as <code class="language-plaintext highlighter-rouge">index-de.md</code>. Translate the content and add the following lines to the frontmatter:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: home
permalink: /
lang: de
---
</code></pre></div></div>

<p>It is very important to have the permalink identical in all language files.</p>

<p>Repeat the same procedure for all your pages. My <code class="language-plaintext highlighter-rouge">about.md</code>, for example, becomes <code class="language-plaintext highlighter-rouge">about-en.md</code> and has the following frontmatter:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: page
title: About
permalink: /about/
lang: en
---
</code></pre></div></div>

<p>My <code class="language-plaintext highlighter-rouge">about-de.md</code> has the following frontmatter:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: page
title: Über
permalink: /about/
lang: de
---
</code></pre></div></div>

<h3 id="step-7-localize-your-posts">Step 7: Localize your posts</h3>

<p>In the <code class="language-plaintext highlighter-rouge">_posts</code> folder, create a subfolder for each <em>additional</em> language (not the default language!). In my case, I only created a <code class="language-plaintext highlighter-rouge">docs/_posts/de</code> folder. Copy all posts, which you want translated, into that folder. If you leave a post away, the Polyglot plugin will use the default language post instead (see the <code class="language-plaintext highlighter-rouge">Welcome to Jekyll</code> post in my sample site for a demonstration of this feature).</p>

<p>Don’t change the filename of the post in the language subfolder!</p>

<p>Finally, add the <code class="language-plaintext highlighter-rouge">lang</code> tag in the frontmatter of all posts (also those in the default language).</p>

<h3 id="step-8-add-a-language-switcher">Step 8: Add a language switcher</h3>

<p>To enable the user to switch between languages, I added a language switcher in <code class="language-plaintext highlighter-rouge">header.html</code>. Add the following code before the closing <code class="language-plaintext highlighter-rouge">&lt;/header&gt;</code> tag:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"wrapper"</span><span class="nt">&gt;</span>
  {% assign is_first_language = true %}
  <span class="c">&lt;!-- jekyll-polyglot will process ferh= into href= through the static_href liquid block tag without relativizing the url; useful for making language navigation switchers  --&gt;</span>
  {% for tongue in site.languages %}
    {% if is_first_language == false %}|{% endif %}
    <span class="nt">&lt;a</span> <span class="err">{%</span> <span class="na">if</span> <span class="na">tongue =</span><span class="s">=</span> <span class="na">site.active_lang</span> <span class="err">%}</span><span class="na">style=</span><span class="s">"font-weight: bold;"</span><span class="err">{%</span> <span class="na">endif</span> <span class="err">%}</span> <span class="err">{%</span> <span class="na">static_href</span> <span class="err">%}</span><span class="na">href=</span><span class="s">"{% if tongue == site.default_lang %}{{site.baseurl}}{{page.url}}{% else %}{{site.baseurl}}/{{ tongue }}{{page.url}}{% endif %}"</span><span class="err">{%</span> <span class="na">endstatic_href</span> <span class="err">%}</span> <span class="nt">&gt;</span>{{ tongue }}<span class="nt">&lt;/a&gt;</span>
    {% assign is_first_language = false %}
  {% endfor %}
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<p>Deploy your site using the <code class="language-plaintext highlighter-rouge">deploy.sh</code> script and you should be good to go with your first multilingual Jekyll site.</p>

  </div>

</article>

      </div>
    </main>
<footer class="site-footer h-card">
  <data class="u-url" href="/multilingual-github-pages/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/multilingual-github-pages/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/multilingual-github-pages/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>A sample multi-lingual GitHub Page built with a Jekyll plugin not supported by GitHub Pages.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a href="https://github.com/ulricusr"><svg class="svg-icon"><use xlink:href="/multilingual-github-pages/assets/minima-social-icons.svg#github"></use></svg> <span class="username">ulricusr</span></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
